# GraphQL Code Generator Configuration with Standard Kotlin Plugin
schema:
  # Shared types first
  - "shared-config/graphql/shared-types.graphqls"
  # Admin-specific schema
  - "services/aqua-admin/src/main/resources/graphql/admin-schema.graphqls"
  # Client-specific schema
  - "services/aqua-client/src/main/resources/graphql/client-schema.graphqls"

generates:
  # Generate Kotlin types for backend
  modules/aqua-common/src/main/graphql-gen/schema.kt:
    plugins:
      - add:
          content: "// Generated by GraphQL Code Generator - DO NOT EDIT"
      - "@graphql-codegen/kotlin-validation"
    config:
      package: "dev.yidafu.aqua.common.graphql.generated"
      scalars:
        Long: "kotlin.Long"
        BigDecimal: "java.math.BigDecimal"
        Double: "kotlin.Double"
        LocalDateTime: "java.time.LocalDateTime"
        Map: "kotlin.collections.Map<String, Any>"
        Float: "kotlin.Float"
        Int: "kotlin.Int"
        String: "kotlin.String"
        Boolean: "kotlin.Boolean"
      withTypes: true
      immutableTypes: true
      skipTypename: true
      validationAnnotations: true
      generateConstructorFromInput: false
      sealedClassUnionsForInterfaces: true

  # Generate TypeScript types for frontend common module
  frontend/common/src/types/graphql.ts:
    plugins:
      - add:
          content: "// Generated by GraphQL Code Generator - DO NOT EDIT"
      - "typescript"
      - "typescript-operations"
    config:
      scalars:
        Long: "number"
        BigDecimal: "number"
        Double: "number"
        LocalDateTime: "string"
        Map: "{ [key: string]: any }"
        Float: "number"
        Int: "number"
        String: "string"
        Boolean: "boolean"
      namingConvention:
        typeNames: change-case#pascalCase
        enumValues: change-case#upperCase
      avoidOptionals: false
      optionalInputType: "null | undefined"
      immutableTypes: true
      skipTypename: true
      maybeValue: "T | null | undefined"
      withMutationFn: true
      withRefetchFn: true
